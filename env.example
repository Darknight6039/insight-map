# =============================================================================
# INSIGHT MVP - CONFIGURATION ENVIRONMENT
# =============================================================================
# Copy this file to .env and configure the values according to your setup

# =============================================================================
# PROJECT CONFIGURATION
# =============================================================================
COMPOSE_PROJECT_NAME=insight_mvp

# =============================================================================
# PERPLEXITY AI CONFIGURATION (Required for AI analysis with web search)
# =============================================================================
# Get your API key from: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=your_perplexity_api_key_here

# Configuration multi-modèles Sonar (optimisation par cas d'usage)
# Cette stratégie multi-modèles optimise les coûts (~60% sur chat) tout en maximisant la qualité des rapports
# IMPORTANT: Tous les rapports (standards et approfondis) utilisent sonar-pro avec 12000 tokens
PERPLEXITY_MODEL_CHAT=sonar              # Chat court, tests API (coût optimisé)
PERPLEXITY_MODEL_ANALYSIS=sonar-pro      # TOUS les rapports (standards 15-25 sources ET approfondis 60 sources)
PERPLEXITY_MODEL_REASONING=sonar-reasoning-pro # Réservé usage futur (non utilisé actuellement) - Migration depuis sonar-reasoning (déprécié le 15/12/2025)

# =============================================================================
# POSTGRES DATABASE CONFIGURATION
# =============================================================================
POSTGRES_USER=insight_user
POSTGRES_PASSWORD=insight_password_2024
POSTGRES_DB=insight_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Database URL for services (automatically constructed)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# =============================================================================
# QDRANT VECTOR DATABASE CONFIGURATION
# =============================================================================
QDRANT_HOST=qdrant
QDRANT_PORT=6333

# =============================================================================
# MICROSERVICES URLS (Internal Docker Network)
# =============================================================================
DOCUMENT_URL=http://document-service:8001
VECTOR_URL=http://vector-service:8002
RAG_URL=http://rag-service:8003
REPORT_URL=http://report-service:8004
STATUS_URL=http://status-service:8005
SCHEDULER_URL=http://scheduler-service:8007
MEMORY_SERVICE_URL=http://memory-service:8008

# =============================================================================
# EMAIL CONFIGURATION (SMTP for automated watches)
# =============================================================================
# Required for sending automated watch reports via email
# For Gmail: use App Password (https://myaccount.google.com/apppasswords)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM=noreply@your-company.com

# =============================================================================
# BRANDING AND ASSETS
# =============================================================================
BRAND_LOGO_PATH=/app/data/logo/logo.svg
COMPANY_NAME=Your Company Name

# =============================================================================
# EMBEDDING MODEL CONFIGURATION
# =============================================================================
# OpenAI embedding model (recommended: text-embedding-3-small)
EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# SUPABASE SELF-HOSTED CONFIGURATION
# =============================================================================
# Run ./scripts/generate-jwt-keys.sh to generate these values
SUPABASE_JWT_SECRET=your-jwt-secret-generated-by-script
SUPABASE_ANON_KEY=your-anon-key-generated-by-script
SUPABASE_SERVICE_KEY=your-service-key-generated-by-script
SUPABASE_POSTGRES_PASSWORD=your-secure-postgres-password

# Supabase URLs (internal Docker network)
SUPABASE_URL=http://supabase-kong:8000
API_EXTERNAL_URL=http://localhost:8000
SITE_URL=http://localhost:3000

# Frontend Supabase (public URLs)
NEXT_PUBLIC_SUPABASE_URL=http://localhost:8000
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-generated-by-script

# Supabase Studio Dashboard
STUDIO_PORT=3001
DASHBOARD_USERNAME=supabase
DASHBOARD_PASSWORD=change-this-password-in-production

# =============================================================================
# LEGACY AUTHENTICATION (kept for migration/rollback)
# =============================================================================
# JWT secret key (generate a strong random key for production!)
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production

# Default admin credentials (created on first startup if no admin exists)
ADMIN_EMAIL=admin@axial.com
ADMIN_PASSWORD=Fazmeb-2fyxsy-quqxen

# =============================================================================
# DEVELOPMENT/PRODUCTION SETTINGS
# =============================================================================
# Environment mode
ENVIRONMENT=development

# API Rate Limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=100

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO
